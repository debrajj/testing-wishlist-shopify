<!DOCTYPE html>
<html>
<head>
  <title>Test Wishlist API</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 800px; margin: 0 auto; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    #log { background: #f5f5f5; padding: 15px; margin-top: 20px; border-radius: 5px; }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <h1>Wishlist API Test</h1>
  
  <div>
    <label>Customer ID: <input type="text" id="customerId" value="test123" /></label><br><br>
    <label>Product ID: <input type="text" id="productId" value="7891234567890" /></label><br><br>
    
    <button onclick="testAdd()">Add to Wishlist</button>
    <button onclick="testGet()">Get Wishlist</button>
    <button onclick="testRemove()">Remove from Wishlist</button>
  </div>
  
  <div id="log"></div>
  
  <script>
    const API_BASE = 'http://localhost:63723/api/wishlist';
    
    function log(message, isError = false) {
      const div = document.getElementById('log');
      const p = document.createElement('p');
      p.className = isError ? 'error' : 'success';
      p.textContent = new Date().toLocaleTimeString() + ' - ' + message;
      div.insertBefore(p, div.firstChild);
    }
    
    async function testAdd() {
      const customerId = document.getElementById('customerId').value;
      const productId = document.getElementById('productId').value;
      
      log('Adding to wishlist...');
      
      try {
        const formData = new FormData();
        formData.append('customerId', customerId);
        formData.append('productId', productId);
        
        const response = await fetch(API_BASE + '/add', {
          method: 'POST',
          body: formData
        });
        
        const data = await response.json();
        log('✅ Added! Response: ' + JSON.stringify(data));
      } catch (error) {
        log('❌ Error: ' + error.message, true);
      }
    }
    
    async function testGet() {
      const customerId = document.getElementById('customerId').value;
      
      log('Getting wishlist...');
      
      try {
        const response = await fetch(API_BASE + '/get?customerId=' + customerId);
        const data = await response.json();
        log('✅ Got wishlist! Items: ' + JSON.stringify(data.wishlist));
      } catch (error) {
        log('❌ Error: ' + error.message, true);
      }
    }
    
    async function testRemove() {
      const customerId = document.getElementById('customerId').value;
      const productId = document.getElementById('productId').value;
      
      log('Removing from wishlist...');
      
      try {
        const formData = new FormData();
        formData.append('customerId', customerId);
        formData.append('productId', productId);
        
        const response = await fetch(API_BASE + '/remove', {
          method: 'POST',
          body: formData
        });
        
        const data = await response.json();
        log('✅ Removed! Response: ' + JSON.stringify(data));
      } catch (error) {
        log('❌ Error: ' + error.message, true);
      }
    }
  </script>
</body>
</html>
